(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[722],{3796:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/inventory/edit/[id]",function(){return a(5143)}])},2092:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var s=a(609);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&a.indexOf(e)===t).join(" ")};var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:u,...m}=e;return(0,s.createElement)("svg",{ref:t,...r,width:n,height:n,stroke:a,strokeWidth:c?24*Number(i)/Number(n):i,className:l("lucide",o),...m},[...u.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let a=(0,s.forwardRef)((a,r)=>{let{className:c,...o}=a;return(0,s.createElement)(i,{ref:r,iconNode:t,className:l("lucide-".concat(n(e)),c),...o})});return a.displayName="".concat(e),a}},2206:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(2092).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7074:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(2092).Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},1025:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(2092).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4609:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(2092).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},5143:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var s=a(2433),n=a(609),l=a(8143),r=a(7259),i=a(2206),c=a(4609),o=a(7074),d=a(1025);let u=(0,a(2092).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function m(){let e=(0,l.useRouter)(),{id:t}=e.query,[a,m]=(0,n.useState)(!1),[h,x]=(0,n.useState)(!1),[p,y]=(0,n.useState)({title:"",description:"",quantity:1,img:"",returnable:!0,available:!0});(0,n.useEffect)(()=>{(async()=>{if(!t)return;let a=JSON.parse(localStorage.getItem("userdata"));(null==a?void 0:a.isAdmin)||e.push("/inventory");try{let e=await r.Z.get("/api/inventory/".concat(t));e.data&&y(e.data)}catch(t){console.error("Error fetching item:",t),alert("Failed to fetch item details"),e.push("/inventory")}})()},[t,e]);let v=async a=>{a.preventDefault(),m(!0);try{(await r.Z.put("/api/inventory/".concat(t),p)).data&&(alert("Item updated successfully!"),e.push("/inventory"))}catch(e){var s,n;console.error("Error updating item:",e),alert((null===(n=e.response)||void 0===n?void 0:null===(s=n.data)||void 0===s?void 0:s.message)||"Failed to update item")}finally{m(!1)}},b=async()=>{if(window.confirm("Are you sure you want to delete this item? This action cannot be undone.")){x(!0);try{let a=await r.Z.delete("/api/inventory/".concat(t));200===a.status&&(alert("Item deleted successfully!"),e.push("/inventory"))}catch(e){var a,s;console.error("Error deleting item:",e),alert((null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to delete item"),x(!1)}}},f=e=>{let{name:t,value:a,type:s,checked:n}=e.target;y(e=>({...e,[t]:"checkbox"===s?n:a}))},j=e=>{y(t=>({...t,quantity:e?t.quantity+1:Math.max(0,t.quantity-1)}))};return(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsxs)("button",{onClick:()=>e.push("/inventory"),className:"btn-outline flex items-center",children:[(0,s.jsx)(i.Z,{className:"w-5 h-5 mr-2"}),"Back to Inventory"]}),(0,s.jsx)("button",{onClick:b,disabled:h,className:"btn-danger flex items-center gap-2 px-4 py-2",children:h?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin w-5 h-5 border-2 border-white rounded-full border-t-transparent"}),(0,s.jsx)("span",{children:"Deleting..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"Delete Item"})]})})]}),(0,s.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,s.jsxs)("div",{className:"card p-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Edit Item"}),(0,s.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"Title"}),(0,s.jsx)("input",{type:"text",name:"title",value:p.title,onChange:f,className:"form-input",required:!0,placeholder:"Enter item title"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"Description"}),(0,s.jsx)("textarea",{name:"description",value:p.description||"",onChange:f,className:"form-input min-h-[100px]",placeholder:"Enter item description"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"Image URL"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",name:"img",value:p.img||"",onChange:f,className:"form-input flex-grow",placeholder:"Enter image URL"}),(0,s.jsx)("button",{type:"button",className:"btn-outline",onClick:()=>y(e=>({...e,img:""})),children:"Clear"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"Quantity"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{type:"button",className:"btn-outline p-2",onClick:()=>j(!1),children:(0,s.jsx)(o.Z,{className:"w-4 h-4"})}),(0,s.jsx)("input",{type:"number",name:"quantity",value:p.quantity,onChange:f,className:"form-input text-center",min:"-1"}),(0,s.jsx)("button",{type:"button",className:"btn-outline p-2",onClick:()=>j(!0),children:(0,s.jsx)(d.Z,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:"text-sm text-gray-500 ml-2",children:"Set to -1 for unlimited"})]})]}),(0,s.jsxs)("div",{className:"flex gap-6",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",name:"returnable",checked:p.returnable,onChange:f,className:"form-checkbox"}),(0,s.jsx)("span",{children:"Returnable"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",name:"available",checked:p.available,onChange:f,className:"form-checkbox"}),(0,s.jsx)("span",{children:"Available"})]})]}),(0,s.jsx)("button",{type:"submit",className:"btn-primary w-full",disabled:a,children:a?(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin w-5 h-5 border-2 border-white rounded-full border-t-transparent"})}):(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)(u,{className:"w-5 h-5"}),"Save Changes"]})})]})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[211,888,774,179],()=>t(3796)),_N_E=e.O()}]);