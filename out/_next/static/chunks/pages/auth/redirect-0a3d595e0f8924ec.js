(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{3286:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/redirect",function(){return s(7804)}])},7804:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(2433),r=s(609),n=s(7259),c=s(8143);let i=function(){let[e,t]=(0,r.useState)(!0),[s,i]=(0,r.useState)(null),l=(0,c.useRouter)(),{accessid:u}=l.query,d=async e=>{try{let t=await n.Z.post("".concat("https://sso.tech-iitb.org","/project/getuserdata"),{id:e});return console.log(t.data),t.data}catch(e){throw Error("Failed to fetch user data")}};return((0,r.useEffect)(()=>{u&&(async()=>{try{t(!0);let e={...await d(u),isAdmin:!1};localStorage.setItem("userdata",JSON.stringify(e)),l.push("/inventory")}catch(e){i(e.message)}finally{t(!1)}})()},[u,l]),s)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"card p-8 text-center",children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-red-600 mb-2",children:"Authentication Error"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:s}),(0,a.jsx)("button",{className:"btn-primary",onClick:()=>l.push("/"),children:"Return to Login"})]})}):e?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"card p-8 text-center",children:[(0,a.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-blue-600 font-semibold",children:"Authenticating..."})]})}):null}}},e=>{var t=t=>e(e.s=t);e.O(0,[211,888,774,179],()=>t(3286)),_N_E=e.O()}]);